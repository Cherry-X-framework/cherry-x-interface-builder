!function(t){"use strict";var s={init:function(){this.component.init(),t(document).on("cxInterfaceBuilder",this.component.init.bind(this.component))},component:{tabClass:".cx-tab",accordionClass:".cx-accordion",toggleClass:".cx-toggle",buttonClass:".cx-component__button",contentClass:".cx-settings__content",buttonActiveClass:"active",showClass:"show",localStorage:{},init:function(){this.localStorage=this.getState()||{},this.componentInit(this.tabClass),this.componentInit(this.accordionClass),this.componentInit(this.toggleClass),this.addEvent()},addEvent:function(){t("body").off("click.cxInterfaceBuilder").on("click.cxInterfaceBuilder",this.tabClass+" "+this.buttonClass+", "+this.toggleClass+" "+this.buttonClass+", "+this.accordionClass+" "+this.buttonClass,this.componentClick.bind(this))},componentInit:function(s){var a=this,e=t(s),o=null,n=null,i=null,l="";e.each(function(e,c){switch(c=t(c),o=c.data("compotent-id"),s){case a.toggleClass:a.localStorage[o]&&a.localStorage[o].length&&(l=a.localStorage[o].join(", ")),t(a.contentClass,c).not(l).addClass(a.showClass).prevAll(a.buttonClass).addClass(a.buttonActiveClass);break;case a.tabClass:case a.accordionClass:a.localStorage[o]?(i=a.localStorage[o][0],n=t('[data-content-id="'+i+'"]',c)):(n=t(a.buttonClass,c).eq(0),i=n.data("content-id")),a.showElement(n,c,i)}})},componentClick:function(s){var a,e=t(s.target),o=e.closest(this.tabClass+", "+this.accordionClass+", "+this.toggleClass),n=new RegExp(this.tabClass+"|"+this.accordionClass+"|"+this.toggleClass),i=o[0].className.match(n)[0].replace(" ","."),l=e.data("content-id"),c=o.data("compotent-id"),h=e.hasClass(this.buttonActiveClass);switch(i){case this.tabClass:h||(this.hideElement(o),this.showElement(e,o,l),this.localStorage[c]=new Array(l),this.setState());break;case this.accordionClass:this.hideElement(o),h?this.localStorage[c]={}:(this.showElement(e,o,l),this.localStorage[c]=new Array(l)),this.setState();break;case this.toggleClass:e.toggleClass(this.buttonActiveClass).nextAll(l).toggleClass(this.showClass),Array.isArray(this.localStorage[c])?(a=this.localStorage[c].indexOf(l),-1!==a?this.localStorage[c].splice(a,1):this.localStorage[c].push(l)):this.localStorage[c]=new Array(l),this.setState()}return e.blur(),!1},showElement:function(s,a,e){s.addClass(this.buttonActiveClass),a.data("content-id",e),t(e,a).addClass(this.showClass)},hideElement:function(s){var a=s.data("content-id");t('[data-content-id="'+a+'"]',s).removeClass(this.buttonActiveClass),t(a,s).removeClass(this.showClass)},getState:function(){try{return JSON.parse(localStorage.getItem("interface-builder"))}catch(t){return!1}},setState:function(){try{localStorage.setItem("interface-builder",JSON.stringify(this.localStorage))}catch(t){return!1}}}};s.init()}(jQuery);