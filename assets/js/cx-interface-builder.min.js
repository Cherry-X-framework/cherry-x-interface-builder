!function(t){"use strict";({init:function(){this.component.init(),t(document).on("cxFramework:interfaceBuilder:component",this.component.init.bind(this.component)),this.control.init(),t(document).on("cxFramework:interfaceBuilder:control",this.control.init.bind(this.control))},component:{tabClass:".cx-tab",accordionClass:".cx-accordion",toggleClass:".cx-toggle",buttonClass:".cx-component__button",contentClass:".cx-settings__content",buttonActiveClass:"active",showClass:"show",localStorage:{},init:function(){this.localStorage=this.getState()||{},this.componentInit(this.tabClass),this.componentInit(this.accordionClass),this.componentInit(this.toggleClass),this.addEvent()},addEvent:function(){t("body").off("click.cxInterfaceBuilder").on("click.cxInterfaceBuilder",this.tabClass+" "+this.buttonClass+", "+this.toggleClass+" "+this.buttonClass+", "+this.accordionClass+" "+this.buttonClass,this.componentClick.bind(this))},componentInit:function(s){var i=this,e=null,a=null,n=null,c="";t(s).each(function(o,l){switch(l=t(l),e=l.data("compotent-id"),s){case i.toggleClass:i.localStorage[e]&&i.localStorage[e].length&&(c=i.localStorage[e].join(", ")),t(i.contentClass,l).not(c).addClass(i.showClass).prevAll(i.buttonClass).addClass(i.buttonActiveClass);break;case i.tabClass:case i.accordionClass:i.localStorage[e]?(n=i.localStorage[e][0],a=t('[data-content-id="'+n+'"]',l)):(a=t(i.buttonClass,l).eq(0),n=a.data("content-id")),i.showElement(a,l,n)}})},componentClick:function(s){var i,e=t(s.target),a=e.closest(this.tabClass+", "+this.accordionClass+", "+this.toggleClass),n=new RegExp(this.tabClass+"|"+this.accordionClass+"|"+this.toggleClass),c=a[0].className.match(n)[0].replace(" ","."),o=e.data("content-id"),l=a.data("compotent-id"),r=e.hasClass(this.buttonActiveClass);switch(c){case this.tabClass:r||(this.hideElement(a),this.showElement(e,a,o),this.localStorage[l]=new Array(o),this.setState());break;case this.accordionClass:this.hideElement(a),r?this.localStorage[l]={}:(this.showElement(e,a,o),this.localStorage[l]=new Array(o)),this.setState();break;case this.toggleClass:e.toggleClass(this.buttonActiveClass).nextAll(o).toggleClass(this.showClass),Array.isArray(this.localStorage[l])?-1!==(i=this.localStorage[l].indexOf(o))?this.localStorage[l].splice(i,1):this.localStorage[l].push(o):this.localStorage[l]=new Array(o),this.setState()}return e.blur(),!1},showElement:function(s,i,e){s.addClass(this.buttonActiveClass),i.data("content-id",e),t(e,i).addClass(this.showClass)},hideElement:function(s){var i=s.data("content-id");t('[data-content-id="'+i+'"]',s).removeClass(this.buttonActiveClass),t(i,s).removeClass(this.showClass)},getState:function(){try{return JSON.parse(localStorage.getItem("interface-builder"))}catch(t){return!1}},setState:function(){try{localStorage.setItem("interface-builder",JSON.stringify(this.localStorage))}catch(t){return!1}}},control:{init:function(){this.switcher.init(),this.checkbox.init(),this.radio.init(),this.slider.init()},switcher:{switcherClass:".cx-switcher-wrap",trueClass:".cx-input-switcher-true",falseClass:".cx-input-switcher-false",init:function(){t("body").on("click.cxSwitcher",this.switcherClass,this.switchState.bind(this))},switchState:function(s){var i=t(s.currentTarget),e=t(this.trueClass,i),a=t(this.falseClass,i),n=e[0].checked;e.attr("checked",!n),a.attr("checked",!!n)}},checkbox:{inputClass:'.cx-checkbox-input[type="hidden"]:not([name*="__i__"])',itemClass:".cx-checkbox-label, .cx-checkbox-item",init:function(){console.log(this),t("body").on("click.cxCheckbox",this.itemClass,this.switchState.bind(this))},switchState:function(s){var i=t(s.currentTarget).siblings(this.inputClass),e=i[0].checked;i.val(e?"false":"true").attr("checked",!e)}},radio:{inputClass:'.cx-radio-input:not([name*="__i__"])',init:function(){t("body").on("click.cxRadio",this.inputClass,this.switchState.bind(this))},switchState:function(s){t(s.currentTarget)}},slider:{init:function(){t("body").on("input.cxSlider change.cxSlider",".cx-slider-unit, .cx-ui-stepper-input",this.changeHandler.bind(this))},changeHandler:function(s){var i=t(s.currentTarget),e=i.closest(".cx-slider-wrap"),a=i.hasClass("cx-slider-unit")?".cx-ui-stepper-input":".cx-slider-unit";t(a,e).val(i.val())}}}}).init()}(jQuery);